# 🧪 汇率速算 - 测试运行指南

## 📱 方法一：使用 HBuilderX 运行（推荐）⭐

### 1. 打开项目

```
1. 启动 HBuilderX
2. 点击菜单：文件 → 打开目录
3. 选择项目目录：/Users/tongyao/Desktop/开发/app/汇率速算
4. 等待项目加载完成
```

### 2. 运行到浏览器（最快）

```
方式1：使用菜单
运行 → 运行到浏览器 → Chrome

方式2：使用快捷键
Mac: Command + R
Windows: Ctrl + R
然后选择 Chrome

方式3：使用运行按钮
点击顶部工具栏的绿色 ▶️ 按钮
选择"运行到浏览器 - Chrome"
```

**预期结果**：
- 浏览器自动打开
- 显示汇率速算主页
- 看到默认的 3 个币种卡片（CNY、USD、EUR）
- 可以点击卡片弹出数字键盘

---

### 3. 运行到手机模拟器

#### iOS 模拟器（仅 Mac）

```
1. 确保已安装 Xcode
2. 运行 → 运行到手机或模拟器 → 运行到iOS模拟器
3. 等待编译和启动
```

#### Android 模拟器

```
1. 确保已安装 Android Studio 和模拟器
2. 启动一个 Android 模拟器
3. 运行 → 运行到手机或模拟器 → 运行到Android模拟器
4. 选择已启动的模拟器
```

---

### 4. 真机调试

#### iOS 真机

```
1. 使用数据线连接 iPhone
2. 在 iPhone 上信任此电脑
3. 运行 → 运行到手机或模拟器 → iOS设备
4. 首次需要配置证书
```

#### Android 真机

```
1. 开启 Android 手机的开发者选项
2. 开启 USB 调试
3. 使用数据线连接电脑
4. 运行 → 运行到手机或模拟器 → Android设备
```

---

## 🌐 方法二：命令行运行

### H5 版本（浏览器）

```bash
# 进入项目目录
cd "/Users/tongyao/Desktop/开发/app/汇率速算"

# 运行 H5 开发服务器
npx cross-env NODE_ENV=development npx uni -p h5

# 或使用 HBuilderX CLI
```

然后在浏览器打开：`http://localhost:8080`

---

## 🧪 测试流程

### ✅ 基础功能测试

#### 1. 页面加载测试
- [ ] 主页正常显示
- [ ] 显示 3 个默认币种（CNY、USD、EUR）
- [ ] 显示汇率更新时间
- [ ] 导航栏正常显示

#### 2. 数字键盘测试
```
操作步骤：
1. 点击任意币种卡片
2. 应弹出自定义数字键盘
3. 键盘标题显示当前币种信息

测试输入：
- 输入整数：1000
- 输入小数：1234.56
- 输入小数点开头：.5（应显示为 0.5）
- 连续输入多个小数点（应只保留一个）
- 点击删除按钮
- 点击"完成"关闭键盘
```

#### 3. 汇率计算测试
```
操作步骤：
1. 在 CNY 输入 1000
2. 检查 USD 和 EUR 是否自动换算
3. 切换到 USD 输入 100
4. 检查 CNY 和 EUR 是否更新

预期结果：
- 所有币种联动计算
- 金额格式化显示（千分位、小数点）
- 计算精确无误
```

#### 4. 币种管理测试
```
添加币种：
1. 点击"添加币种"按钮
2. 跳转到币种选择页
3. 点击一个币种（如 JPY）
4. 返回主页，新币种已添加
5. 自动计算新币种的金额

搜索币种：
1. 在搜索框输入 "日元" 或 "JPY"
2. 检查搜索结果

删除币种：
1. 点击币种卡片右上角的 × 按钮
2. 确认删除
3. 币种已移除
4. 尝试删除到只剩 2 个（应提示至少保留 2 个）

长按操作：
1. 长按任意币种卡片
2. 弹出操作菜单
3. 测试"删除"和"清空金额"功能
```

#### 5. 刷新汇率测试
```
下拉刷新：
1. 在主页向下拉
2. 释放触发刷新
3. 显示刷新动画
4. 显示"汇率已更新"提示

点击刷新：
1. 点击右上角刷新按钮
2. 按钮旋转动画
3. 更新成功提示

离线测试：
1. 断开网络连接
2. 尝试刷新
3. 应显示"离线模式"标识
4. 使用缓存数据
```

#### 6. 设置页面测试
```
访问设置：
1. 通过导航或链接进入设置页
   （临时：修改URL为 #/pages/settings/index）

语言切换：
1. 点击"语言设置"
2. 选择 English
3. 界面文字切换为英文
4. 切回简体中文

小数位设置：
1. 点击"小数位数"
2. 选择 4 位
3. 返回主页查看金额显示

千分位设置：
1. 点击"千分位符"
2. 选择不同分隔符
3. 查看金额格式变化

主题切换：
1. 点击"主题模式"
2. 选择"深色"
3. 界面切换为深色主题
4. 切换回"浅色"或"跟随系统"

清除缓存：
1. 点击"清除缓存数据"
2. 确认清除
3. 汇率和金额数据清空
```

---

## 🐛 常见问题排查

### 问题 1：页面空白
**可能原因**：
- 控制台有错误
- 依赖未安装

**解决方法**：
```bash
# 重新安装依赖
rm -rf node_modules
npm install

# 在 HBuilderX 重启项目
```

### 问题 2：键盘不弹出
**检查**：
- 打开浏览器控制台查看错误
- 检查 `v-model:visible` 绑定是否正确

### 问题 3：汇率不更新
**检查**：
- 网络连接是否正常
- 打开控制台查看 API 请求
- 检查汇率 API 是否可访问：https://open.er-api.com/v6/latest/USD

**测试命令**：
```bash
curl https://open.er-api.com/v6/latest/USD
```

### 问题 4：计算不准确
**检查**：
- 控制台是否有 big.js 相关错误
- 汇率数据是否加载成功

### 问题 5：设置页面无法访问
**原因**：
- TabBar 已临时移除

**临时访问方法**：
```javascript
// 在主页添加临时按钮，或直接修改 URL
// 浏览器地址栏输入：
http://localhost:8080/#/pages/settings/index
```

---

## 📊 调试工具

### 1. 浏览器控制台
```
打开方式：
Mac: Command + Option + I
Windows: F12 或 Ctrl + Shift + I

查看内容：
- Console：查看日志和错误
- Network：查看网络请求
- Application：查看本地存储
```

### 2. HBuilderX 控制台
```
查看位置：
底部控制台面板

输出内容：
- 编译信息
- 运行日志
- 错误提示
```

### 3. Vue Devtools
```
安装：
浏览器扩展商店搜索 "Vue Devtools"

功能：
- 查看组件树
- 查看 Pinia 状态
- 追踪事件
```

---

## 🎯 测试检查清单

### 基础功能（必测）✅
- [ ] 页面正常加载显示
- [ ] 数字键盘弹出和输入
- [ ] 汇率联动计算
- [ ] 添加币种功能
- [ ] 删除币种功能
- [ ] 刷新汇率功能

### 高级功能（选测）
- [ ] 搜索币种
- [ ] 长按操作
- [ ] 离线模式
- [ ] 设置页面各项功能
- [ ] 多语言切换
- [ ] 主题切换

### 性能测试
- [ ] 页面加载速度 < 2秒
- [ ] 计算响应时间 < 100ms
- [ ] 键盘弹出流畅无卡顿
- [ ] 列表滚动流畅

### 兼容性测试
- [ ] Chrome 浏览器
- [ ] Safari 浏览器（Mac）
- [ ] 移动端浏览器
- [ ] iOS 真机/模拟器
- [ ] Android 真机/模拟器

---

## 📝 测试记录模板

```
测试日期：2025-10-20
测试人员：Your Name
测试环境：Chrome / iOS / Android
项目版本：1.0.0

功能点 | 状态 | 备注
-----|------|------
页面加载 | ✅ 通过 | 
数字键盘 | ✅ 通过 | 
汇率计算 | ✅ 通过 | 
添加币种 | ✅ 通过 | 
删除币种 | ✅ 通过 | 
刷新汇率 | ⚠️  问题 | 网络超时
设置功能 | 📝 未测 | 

发现的问题：
1. 

优化建议：
1. 
```

---

## 🎊 测试完成后

测试通过后，请告诉我：

1. **"测试通过，运行正常"** - 我们可以继续优化
2. **"发现问题：[具体描述]"** - 我会立即修复
3. **"需要添加功能：[具体需求]"** - 我会帮您实现
4. **"准备发布"** - 开始配置图标和打包

---

**祝测试顺利！** 🚀

