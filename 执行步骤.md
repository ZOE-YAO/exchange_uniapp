# 📝 执行步骤指南

## 🚀 快速执行（复制粘贴）

### 方法1：一键执行（推荐）

**打开终端，复制以下整段命令并粘贴执行：**

```bash
sudo chown -R 501:20 "/Users/tongyao/.npm" && cd /Users/tongyao/Desktop/开发/app/汇率速算 && npm install --legacy-peer-deps && rm -rf unpackage && echo "✅ 安装完成！现在可以在 HBuilderX 中运行了"
```

**会提示输入密码**（就是你的 Mac 登录密码，输入时不显示，输完按回车）

---

### 方法2：分步执行（更安全）

#### 步骤 1：打开终端
- 按 `Command + 空格`
- 输入 `终端` 或 `Terminal`
- 按回车打开

#### 步骤 2：修复 npm 权限
```bash
sudo chown -R 501:20 "/Users/tongyao/.npm"
```
- 输入你的 Mac 密码（输入时不显示）
- 按回车

#### 步骤 3：进入项目目录
```bash
cd /Users/tongyao/Desktop/开发/app/汇率速算
```

#### 步骤 4：安装依赖
```bash
npm install --legacy-peer-deps
```
- 等待安装完成（可能需要1-2分钟）

#### 步骤 5：清理缓存
```bash
rm -rf unpackage
```

#### 步骤 6：验证安装
```bash
npm list --depth=0
```
- 应该看到 pinia, big.js, dayjs 等依赖

---

## 🖼️ 图文说明

### 1. 打开终端
```
🔍 聚焦搜索 (Command + 空格)
   ↓
输入 "终端" 或 "terminal"
   ↓
打开终端窗口
```

### 2. 执行命令
```
终端窗口
─────────────────────────────────────
$ sudo chown -R 501:20 "/Users/tongyao/.npm"
Password: ●●●●●●  (输入你的密码)
$ cd /Users/tongyao/Desktop/开发/app/汇率速算
$ npm install --legacy-peer-deps
...安装进度...
added 15 packages in 30s
✅ 完成
─────────────────────────────────────
```

---

## 🎯 预期输出

### 成功的标志

**步骤 1 输出：**
```
$ sudo chown -R 501:20 "/Users/tongyao/.npm"
Password: 
(没有输出，说明成功)
```

**步骤 4 输出：**
```
$ npm install --legacy-peer-deps

added 15 packages, and audited 16 packages in 30s

5 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
```

**步骤 5 输出：**
```
$ rm -rf unpackage
(没有输出，说明成功)
```

**步骤 6 输出：**
```
$ npm list --depth=0
exchange-rate-calculator@1.0.0 /Users/tongyao/Desktop/开发/app/汇率速算
├── big.js@6.2.1
├── dayjs@1.11.13
├── pinia@2.2.8
├── @dcloudio/types@3.4.15
├── @dcloudio/vite-plugin-uni@3.0.0-4020420240930001
├── sass@1.82.0
└── vite@5.2.8
```

---

## ⚠️ 常见问题

### Q1: 提示 "command not found: npm"
**解决**：需要先安装 Node.js
```bash
# 访问 https://nodejs.org/
# 下载并安装 LTS 版本
```

### Q2: 密码输入错误
**解决**：重新执行命令，仔细输入密码

### Q3: 安装很慢或卡住
**解决**：使用国内镜像
```bash
npm config set registry https://registry.npmmirror.com
npm install --legacy-peer-deps
```

### Q4: 提示权限不足
**解决**：确保使用了 `sudo`
```bash
sudo chown -R 501:20 "/Users/tongyao/.npm"
```

---

## 🎉 安装成功后

### 1. 关闭终端（可选）
```bash
exit
```
或直接关闭窗口

### 2. 打开 HBuilderX
- 完全退出 HBuilderX（Command + Q）
- 重新打开 HBuilderX
- 打开项目

### 3. 运行项目
```
菜单栏: 运行 → 运行到手机或模拟器 → iOS 模拟器
```

### 4. 等待编译
- 第一次编译可能需要 1-2 分钟
- 观察控制台输出
- 应该不再有 "iife" 错误

---

## 📞 如果遇到问题

### 复制完整错误信息
```bash
npm install --legacy-peer-deps 2>&1 | tee install-log.txt
```
这会把错误保存到 `install-log.txt` 文件

### 提供以下信息
1. 错误信息截图
2. Node.js 版本：`node -v`
3. npm 版本：`npm -v`
4. 操作系统版本

---

## 🔄 完整流程总结

```
1. 打开终端 (Command + 空格 → 输入 terminal)
   ↓
2. 修复权限 (sudo chown -R 501:20 "/Users/tongyao/.npm")
   ↓
3. 进入项目 (cd /Users/tongyao/Desktop/开发/app/汇率速算)
   ↓
4. 安装依赖 (npm install --legacy-peer-deps)
   ↓
5. 清理缓存 (rm -rf unpackage)
   ↓
6. 打开 HBuilderX
   ↓
7. 运行项目 (运行 → iOS 模拟器)
   ↓
8. ✅ 构建成功！
```

---

**现在就打开终端开始执行吧！** 🚀

**最简单的方式：复制这一行到终端执行**
```bash
sudo chown -R 501:20 "/Users/tongyao/.npm" && cd /Users/tongyao/Desktop/开发/app/汇率速算 && npm install --legacy-peer-deps && rm -rf unpackage && echo "✅ 完成！"
```

