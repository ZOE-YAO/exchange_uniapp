# ä¾èµ–é”å®šè¯´æ˜

## ğŸ“¦ å½“å‰ç¨³å®šä¾èµ–ç‰ˆæœ¬

**é”å®šæ—¥æœŸ**: 2025-10-21  
**æ„å»ºçŠ¶æ€**: âœ… iOS æ„å»ºæˆåŠŸ  
**è¿è¡Œç¯å¢ƒ**: macOS 24.6.0 / iOS å®æœºæµ‹è¯•é€šè¿‡

---

## ğŸ”’ æ ¸å¿ƒä¾èµ–ç‰ˆæœ¬

### package.json å…³é”®é…ç½®

```json
{
  "name": "exchange-rate-calculator",
  "version": "1.0.0",
  "dependencies": {
    "@dcloudio/uni-app": "3.0.0-4020920240930001",
    "vue": "^3.4.21",
    "big.js": "^6.2.1",
    "pinia": "^2.1.7",
    "pinia-plugin-persistedstate": "^3.2.1"
  },
  "devDependencies": {
    "@dcloudio/types": "^3.4.8",
    "@dcloudio/uni-automator": "3.0.0-4020920240930001",
    "@dcloudio/uni-cli-shared": "3.0.0-4020920240930001",
    "@dcloudio/uni-stacktracey": "3.0.0-4020920240930001",
    "@dcloudio/vite-plugin-uni": "3.0.0-4020920240930001"
  }
}
```

---

## âš ï¸ ä¾èµ–ç‰ˆæœ¬çº¦æŸè¯´æ˜

### ä¸¥æ ¼é”å®šç‰ˆæœ¬
ä»¥ä¸‹ä¾èµ–å¿…é¡»ä½¿ç”¨**ç²¾ç¡®ç‰ˆæœ¬**ï¼Œä¸å¯å‡çº§ï¼š

1. **@dcloudio/uni-app: 3.0.0-4020920240930001**
   - åŸå› ï¼šuni-app æ¡†æ¶æ ¸å¿ƒï¼Œç‰ˆæœ¬å‡çº§å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥
   - é£é™©ï¼šé«˜

2. **@dcloudio/vite-plugin-uni: 3.0.0-4020920240930001**
   - åŸå› ï¼šä¸ uni-app ç‰ˆæœ¬å¼ºç»‘å®š
   - é£é™©ï¼šé«˜

### å…è®¸å°ç‰ˆæœ¬å‡çº§
ä»¥ä¸‹ä¾èµ–ä½¿ç”¨ `^` ç¬¦å·ï¼Œå…è®¸å°ç‰ˆæœ¬å‡çº§ï¼š

1. **vue: ^3.4.21**
   - å…è®¸èŒƒå›´ï¼š3.4.x
   - ä¸å…è®¸ï¼š3.5.x æˆ– 4.x.x
   - åŸå› ï¼šVue 3.4 ç³»åˆ—ç¨³å®š

2. **big.js: ^6.2.1**
   - å…è®¸èŒƒå›´ï¼š6.2.x
   - ç”¨é€”ï¼šç²¾ç¡®çš„é‡‘é¢è®¡ç®—
   - é‡è¦æ€§ï¼šæ ¸å¿ƒåŠŸèƒ½ä¾èµ–

3. **pinia: ^2.1.7**
   - å…è®¸èŒƒå›´ï¼š2.1.x
   - ç”¨é€”ï¼šçŠ¶æ€ç®¡ç†
   - å…¼å®¹æ€§ï¼šä¸ Vue 3.4 å…¼å®¹

---

## ğŸš« ç¦æ­¢çš„æ“ä½œ

### 1. ç¦æ­¢æ‰§è¡Œ npm update
```bash
# âŒ å±é™©æ“ä½œ
npm update

# âŒ å±é™©æ“ä½œ
npm update vue

# âŒ å±é™©æ“ä½œ
npm install @dcloudio/uni-app@latest
```

### 2. ç¦æ­¢åˆ é™¤ package-lock.json
```bash
# âŒ é™¤éæ˜ç¡®éœ€è¦é‡æ–°ç”Ÿæˆä¾èµ–æ ‘
rm package-lock.json
```

### 3. ç¦æ­¢ä¿®æ”¹ uni-app ç›¸å…³ç‰ˆæœ¬
```bash
# âŒ ä¼šå¯¼è‡´æ„å»ºå¤±è´¥
npm install @dcloudio/uni-app@3.0.0-alpha-xxx
```

---

## âœ… å®‰å…¨çš„ä¾èµ–æ“ä½œ

### 1. å®‰è£…ä¾èµ–ï¼ˆæ¨èï¼‰
```bash
# âœ… ä½¿ç”¨ npm ci ç¡®ä¿ç²¾ç¡®ç‰ˆæœ¬
npm ci

# âœ… æˆ–è€…å¸¸è§„å®‰è£…
npm install
```

### 2. æ·»åŠ æ–°ä¾èµ–
```bash
# âœ… æ·»åŠ å¼€å‘ä¾èµ–
npm install --save-dev <package-name>

# âœ… æ·»åŠ ç”Ÿäº§ä¾èµ–
npm install --save <package-name>
```

### 3. æ£€æŸ¥ä¾èµ–çŠ¶æ€
```bash
# âœ… æŸ¥çœ‹è¿‡æ—¶çš„ä¾èµ–
npm outdated

# âœ… æ£€æŸ¥ä¾èµ–å®‰å…¨æ€§
npm audit

# âœ… æŸ¥çœ‹ä¾èµ–æ ‘
npm list --depth=0
```

---

## ğŸ”§ ä¾èµ–é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æ„å»ºå¤±è´¥æç¤ºç‰ˆæœ¬ä¸åŒ¹é…

**ç—‡çŠ¶**:
```
Error: Module version mismatch
```

**è§£å†³**:
```bash
# 1. åˆ é™¤ node_modules
rm -rf node_modules

# 2. åˆ é™¤ package-lock.json
rm package-lock.json

# 3. æ¸…ç† npm ç¼“å­˜
npm cache clean --force

# 4. é‡æ–°å®‰è£…
npm install

# 5. å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œä½¿ç”¨ npm ci
npm ci
```

### é—®é¢˜2: big.js è®¡ç®—é”™è¯¯

**ç—‡çŠ¶**: é‡‘é¢è®¡ç®—ä¸å‡†ç¡®

**æ£€æŸ¥**:
```bash
# æŸ¥çœ‹ big.js ç‰ˆæœ¬
npm list big.js

# åº”è¯¥æ˜¾ç¤º: big.js@6.2.1 æˆ– 6.2.x
```

**ä¿®å¤**:
```bash
# å¦‚æœç‰ˆæœ¬ä¸å¯¹ï¼Œé‡æ–°å®‰è£…
npm install big.js@^6.2.1
```

### é—®é¢˜3: pinia çŠ¶æ€ä¸¢å¤±

**ç—‡çŠ¶**: åº”ç”¨çŠ¶æ€ä¸æŒä¹…åŒ–

**æ£€æŸ¥**:
```bash
# ç¡®è®¤ pinia-plugin-persistedstate å·²å®‰è£…
npm list pinia-plugin-persistedstate
```

**ä¿®å¤**:
```bash
# é‡æ–°å®‰è£…
npm install pinia@^2.1.7 pinia-plugin-persistedstate@^3.2.1
```

### é—®é¢˜4: uni-app æ„å»ºå¤±è´¥

**ç—‡çŠ¶**: 
```
[plugin:vite:uni-app] xxx
```

**è§£å†³**:
```bash
# 1. ç¡®ä¿æ‰€æœ‰ uni-app ç›¸å…³åŒ…ç‰ˆæœ¬ä¸€è‡´
npm list | grep @dcloudio

# 2. åº”è¯¥å…¨éƒ¨æ˜¾ç¤º: 3.0.0-4020920240930001

# 3. å¦‚æœç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

---

## ğŸ“‹ ä¾èµ–æ£€æŸ¥æ¸…å•

### å®‰è£…åéªŒè¯
```bash
# 1. æ£€æŸ¥å…³é”®ä¾èµ–ç‰ˆæœ¬
npm list big.js vue pinia @dcloudio/uni-app

# 2. éªŒè¯ä¾èµ–å®Œæ•´æ€§
npm ls

# 3. æ£€æŸ¥æ˜¯å¦æœ‰æœªè§£å†³çš„ä¾èµ–
npm audit

# 4. æµ‹è¯•æ„å»º
npm run dev:app-plus
```

### é¢„æœŸè¾“å‡º
```
â”œâ”€â”€ @dcloudio/uni-app@3.0.0-4020920240930001
â”œâ”€â”€ vue@3.4.21
â”œâ”€â”€ big.js@6.2.1
â”œâ”€â”€ pinia@2.1.7
â””â”€â”€ pinia-plugin-persistedstate@3.2.1
```

---

## ğŸ”„ å›æ»šæ—¶çš„ä¾èµ–å¤„ç†

### åœºæ™¯1: å›æ»šåˆ°æ­¤å¤‡ä»½ç‚¹

```bash
# 1. å›æ»šä»£ç 
git reset --hard bc66ab7

# 2. ç¡®ä¿ä¾èµ–åŒ¹é…
npm ci

# 3. éªŒè¯ä¾èµ–
npm list --depth=0
```

### åœºæ™¯2: ä»æœªæ¥ç‰ˆæœ¬å›æ»š

```bash
# 1. å›æ»šä»£ç 
git checkout bc66ab7

# 2. å¼ºåˆ¶ä½¿ç”¨æ­¤ç‰ˆæœ¬çš„ä¾èµ–
npm ci

# 3. å¦‚æœ package-lock.json æœ‰å†²çª
git checkout bc66ab7 -- package-lock.json
npm ci

# 4. æ¸…ç†æ„å»ºç¼“å­˜
rm -rf unpackage/dist
```

---

## ğŸ“Š ä¾èµ–å…³ç³»å›¾

```
æ±‡ç‡é€Ÿç®— App
â”‚
â”œâ”€â”€ æ ¸å¿ƒæ¡†æ¶
â”‚   â”œâ”€â”€ @dcloudio/uni-app (uni-app æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ vue (UI æ¡†æ¶)
â”‚   â””â”€â”€ @dcloudio/vite-plugin-uni (æ„å»ºå·¥å…·)
â”‚
â”œâ”€â”€ çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ pinia (çŠ¶æ€ç®¡ç†)
â”‚   â””â”€â”€ pinia-plugin-persistedstate (æŒä¹…åŒ–)
â”‚
â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ big.js (ç²¾ç¡®è®¡ç®—)
â”‚
â””â”€â”€ å¼€å‘å·¥å…·
    â”œâ”€â”€ @dcloudio/types (ç±»å‹å®šä¹‰)
    â””â”€â”€ @dcloudio/uni-automator (è‡ªåŠ¨åŒ–æµ‹è¯•)
```

---

## ğŸ¯ ä¾èµ–æ›´æ–°ç­–ç•¥

### ä½•æ—¶å¯ä»¥æ›´æ–°

1. **å®‰å…¨è¡¥ä¸**: å¦‚æœ npm audit æŠ¥å‘Šé«˜å±æ¼æ´
   ```bash
   npm audit fix
   ```

2. **bug ä¿®å¤**: Vue æˆ– pinia çš„å°ç‰ˆæœ¬ bug ä¿®å¤
   ```bash
   # åªæ›´æ–°å°ç‰ˆæœ¬
   npm update vue
   npm update pinia
   ```

3. **æµ‹è¯•å……åˆ†**: åœ¨å¼€å‘åˆ†æ”¯å……åˆ†æµ‹è¯•å
   ```bash
   # åˆ›å»ºæµ‹è¯•åˆ†æ”¯
   git checkout -b test-dependency-update
   npm update <package>
   # æµ‹è¯•é€šè¿‡åå†åˆå¹¶
   ```

### ä½•æ—¶ä¸åº”æ›´æ–°

1. âŒ uni-app æ ¸å¿ƒåŒ…ï¼ˆé™¤éå®˜æ–¹æ˜ç¡®æ”¯æŒï¼‰
2. âŒ é¡¹ç›®ç¨³å®šè¿è¡Œæ—¶ï¼ˆéå¿…è¦ä¸åŠ¨ï¼‰
3. âŒ ä¸´è¿‘å‘å¸ƒç‰ˆæœ¬æ—¶
4. âŒ æ²¡æœ‰æµ‹è¯•ç¯å¢ƒæ—¶

---

## ğŸ’¾ å¤‡ä»½å»ºè®®

### ä¾èµ–å¤‡ä»½
```bash
# å¤‡ä»½å½“å‰ä¾èµ–çŠ¶æ€
cp package.json package.json.backup
cp package-lock.json package-lock.json.backup

# æˆ–è€…æäº¤åˆ° git
git add package.json package-lock.json
git commit -m "backup: é”å®šä¾èµ–ç‰ˆæœ¬"
```

### æ¢å¤ä¾èµ–
```bash
# ä»å¤‡ä»½æ¢å¤
cp package.json.backup package.json
cp package-lock.json.backup package-lock.json
npm ci
```

---

## ğŸ“± ç‰¹å®šå¹³å°æ³¨æ„äº‹é¡¹

### iOS æ„å»º
- ä¾èµ–ç‰ˆæœ¬å¯¹ iOS æ„å»ºå½±å“è¾ƒå¤§
- uni-app ç‰ˆæœ¬å¿…é¡»ç¨³å®š
- å»ºè®®åœ¨æœ¬åœ°æµ‹è¯•åå†äº‘æ‰“åŒ…

### Android æ„å»º
- å¯¹ä¾èµ–ç‰ˆæœ¬è¦æ±‚ç›¸å¯¹å®½æ¾
- ä½†ä»å»ºè®®ä¿æŒç‰ˆæœ¬ä¸€è‡´

### H5 æ„å»º
- å¯¹å‰ç«¯ä¾èµ–æ•æ„Ÿ
- Vue ç‰ˆæœ¬éœ€è¦ç¨³å®š

---

## ğŸ” ä¾èµ–å®¡è®¡

### å®šæœŸæ£€æŸ¥ï¼ˆæ¯æœˆä¸€æ¬¡ï¼‰
```bash
# 1. æ£€æŸ¥è¿‡æ—¶çš„åŒ…
npm outdated

# 2. æ£€æŸ¥å®‰å…¨æ¼æ´
npm audit

# 3. æ£€æŸ¥ä¾èµ–æ ‘
npm ls

# 4. ç”Ÿæˆä¾èµ–æŠ¥å‘Š
npm list --depth=0 > dependencies-report.txt
```

---

## ğŸ“ ç´§æ€¥è”ç³»

å¦‚æœé‡åˆ°ä¾èµ–ç›¸å…³çš„ä¸¥é‡é—®é¢˜ï¼š

1. æŸ¥çœ‹ `package.json` å’Œ `package-lock.json`
2. å‚è€ƒæœ¬æ–‡æ¡£çš„ç‰ˆæœ¬çº¦æŸ
3. å°è¯• `npm ci` é‡æ–°å®‰è£…
4. å¦‚æœé—®é¢˜æŒç»­ï¼Œå›æ»šåˆ°å¤‡ä»½ç‚¹ bc66ab7

---

**é‡è¦æç¤º**: 
- æ­¤é…ç½®å·²åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯
- ä»»ä½•ä¾èµ–å˜æ›´éƒ½éœ€è¦å……åˆ†æµ‹è¯•
- ä¿æŒ package-lock.json åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­

**æœ€åæ›´æ–°**: 2025-10-21  
**ç»´æŠ¤äºº**: å¼€å‘å›¢é˜Ÿ

